name: CI/CD ðŸš€
on:
  pull_request:
  # push:
  #   branches:
  #     - main
  workflow_dispatch:

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  ###############################
  ########### LINTERS ###########
  ###############################
  backend-linters:
    name: Backend Linters ðŸ’»
    runs-on: ubuntu-latest
    steps:
      - run: echo "âœ…"
  frontend-linters:
    name: Frontend Linters ðŸ•¹
    runs-on: ubuntu-latest
    steps:
      - run: echo "âœ…"
  ###############################
  ############ TESTS ############
  ###############################
  backend-tests:
    name: Backend Tests ðŸ’»
    runs-on: ubuntu-latest
    steps:
      - run: echo "âœ…"

  frontend-tests:
    name: Frontend Tests ðŸ•¹
    runs-on: ubuntu-latest
    steps:
      - run: echo "âœ…"
  ###############################
  ############ BUILD ############
  ###############################
  build:
    needs: [backend-tests, frontend-tests]
    uses: ./.github/workflows/build.yaml

  ###############################
  ########### DEPLOY ############
  ###############################
  deploy:
    needs: [build]
    uses: ./.github/workflows/deploy.yaml
    with:
      environment: ${{ github.event_name == 'pull_request' && 'review-apps' || 'sandbox' }}
